<!DOCTYPE html> 
<html lang="en"> 

<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content= "width=device-width, 
                                    initial-scale=1.0"> 
    <title>CGPA Calculator</title> 
    <link rel="stylesheet" href="/style.css"> 
</head> 
<style>
    
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color:rgb(25, 206, 25)
}

.container {
    max-width: 800px;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    padding: 30px;
    margin-top: 50px;
    margin-left: auto;
    margin-right: auto;
}

h2 {
    margin-bottom: 20px;
    color: #333;
}

form {
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 15px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

input[type="text"],
input[type="number"],
select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

button {
    padding: 8px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button.btn-primary {
    background-color: #007bff;
    color: #fff;
}

button.btn-primary:hover {
    background-color: #0056b3;
}

button.btn-secondary {
    background-color: #6c757d;
    color: #fff;
}
button.delete {
    background-color: red;
    color: #fff;
}
button.btn-secondary:hover {
    background-color: #545b62;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

th,
td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
}

th {
    background-color: #007bff;
    color: #fff;
}

tr:nth-child(even) {
    background-color: #f2f2f2;
}

.error {
    color: red;
    margin-bottom: 10px;
    font-size: 14px;
}

#cgpa { 
    font-weight: bold;
    color: red;
}

</style>

<body class="bg-light">
    <div class="container bg-white rounded p-4"> 
    <div id="calculator"> 
        <span id="creditError" class="error"></span> 
        <span id="inputError" class="error"></span> 
        <br> 
        <h2>CGPA Calculator</h2> 
        <form id="cgpaForm"> 

            <label for="subject">Subject:</label> 
            <input type="text" id="subject" required> 
            <br>
            <br>

            <label for="grade">Grade:</label> 
            <select id="grade"> 
                <option value="O">O</option> 
                <option value="A">A</option> 
                <option value="B">B</option> 
                <option value="C">C</option> 
                <option value="D">D</option> 
                <option value="U">U</option> 
            </select> 
            <br>
            <br>

            <label for="credit">Credit:</label> 
            <input type="number" id="credit" min="1" required> 
            <br>
            <br>

            <button type="button" onclick="addSubject()" class="btn-primary"> 
                Add
            </button> 
        </form> 
        <h3>Calculate CGPA</h3> 
        <table id="subjectTable"> 
            <thead> 
                <tr> 
                    <th>Subject</th> 
                    <th>Grade</th> 
                    <th>Credit</th> 
                    <th>Action</th> 
                </tr> 
            </thead> 
            <tbody id="subjectList"></tbody> 
        </table> 
        <br>
        <h3>CGPA: <span id="cgpa">0.00</span></h3> 

        <button type="button" onclick="calculateCGPA()" class="btn-primary"> 
            Calculate CGPA 
        </button> 
        <button type="button" onclick="resetForm()" class="btn-primary"> 
            Reset 
        </button> 
        <button type="button" class="btn btn-primary" onclick="history.back()">Back</button>
    </div>
    </div> 
    <script>
        let subjects = []; 
let editIndex = -1; 

function addSubject() { 
    const subjectInput = 
        document.getElementById('subject'); 
    const grade = 
        document.getElementById('grade').value; 
    const creditInput = 
        document.getElementById('credit'); 
    const credit = 
        parseInt(creditInput.value); 

    const inputError = 
        document.getElementById('inputError') 
    const creditError = 
        document.getElementById('creditError'); 
    if (!subjectInput.value || isNaN(credit)) { 
        inputError.textContent = 
            'Please fill out all fields.'; 
        return; 
    } 
    else if (credit < 1 || credit > 20) { 
        creditError.textContent = 
            'Credit must be between 1 and 20'; 
        return; 
    } else { 
        creditError.textContent = ''; 
    } 
    if (editIndex !== -1) { 
        subjects[editIndex] = 
        { subject: subjectInput.value, grade, credit }; 
        editIndex = -1; 
    } else { 
        subjects.push( 
            { subject: subjectInput.value, grade, credit }); 
    } 

    displaySubjects(); 
    clearForm(); 
} 

function displaySubjects() { 
    const subjectList = 
        document.getElementById('subjectList'); 
    subjectList.innerHTML = ''; 

    subjects.forEach((s, index) => { 
        const row = document.createElement('tr'); 

        const subjectCell = document.createElement('td'); 
        subjectCell.textContent = s.subject; 

        const gradeCell = document.createElement('td'); 
        gradeCell.textContent = s.grade; 

        const creditCell = document.createElement('td'); 
        creditCell.textContent = s.credit; 

        const actionCell = document.createElement('td'); 
        const editButton = document.createElement('button'); 
        editButton.className = 'edit'; 
        editButton.textContent = 'Edit'; 
        editButton.onclick = () => editSubject(index); 

        const deleteButton = document.createElement('button'); 
        deleteButton.className = 'delete'; 
        deleteButton.textContent = 'Delete'; 
        deleteButton.onclick = () => deleteSubject(index); 

        actionCell.appendChild(deleteButton); 

        row.appendChild(subjectCell); 
        row.appendChild(gradeCell); 
        row.appendChild(creditCell); 
        row.appendChild(actionCell); 

        subjectList.appendChild(row); 
    }); 
} 

function editSubject(index) { 
    const subjectInput = 
        document.getElementById('subject'); 
    const selectedSubject = subjects[index]; 

    subjectInput.value = selectedSubject.subject; 
    document.getElementById('grade').value = 
        selectedSubject.grade; 
    document.getElementById('credit').value = 
        selectedSubject.credit; 

    editIndex = index; 
} 

function deleteSubject(index) { 
    subjects.splice(index, 1); 
    displaySubjects(); 
} 

function calculateCGPA() { 
    const totalCredits = subjects.reduce( 
    (sum, s) => sum + s.credit, 0); 
    const weightedSum = subjects.reduce( 
    (sum, s) => sum + getGradePoint(s.grade) * s.credit, 0); 

    const cgpa = totalCredits === 0 ? 0 : 
    (weightedSum / totalCredits).toFixed(2); 
    document.getElementById('cgpa').textContent = cgpa; 
} 

function getGradePoint(grade) { 
   
    switch (grade) { 
        case 'S': return 10.0; 
        case 'A': return 9.0; 
        case 'B': return 8.0; 
        case 'C': return 7.0; 
        case 'D': return 6.0; 
        case 'U': return 0.0; 
        default: return 0.0; 
    } 
} 
function calculateCGPA() {
    
    const hasFailures = subjects.some(s => s.grade === 'U');

    if (hasFailures) {
        
        document.getElementById('cgpa').textContent = 'N/A';
     
    } else {
        
        const totalCredits = subjects.reduce(
            (sum, s) => sum + s.credit, 0);
        const weightedSum = subjects.reduce(
            (sum, s) => sum + getGradePoint(s.grade) * s.credit, 0);

        const cgpa = totalCredits === 0 ? 0 :
            (weightedSum / totalCredits).toFixed(2);
        document.getElementById('cgpa').textContent = cgpa;
    }
}


function clearForm() { 
    document.getElementById('subject').value = ''; 
    document.getElementById('grade').value = 'A'; 
    document.getElementById('credit').value = ''; 
} 

function resetForm() { 
    subjects = []; 
    editIndex = -1; 
    document.getElementById('subjectList').innerHTML = ''; 
    document.getElementById('cgpa').textContent = '0.00'; 
    clearForm(); 
}

document.getElementById("myForm").reset();
    document.getElementById("submitBtn").disabled = true; 

    </script> 

</body> 

</html>
